name: "'ref' and 'sha' from inputs"
description: "Checks that specifying 'ref' and 'sha' as inputs works"
steps:
  - uses: ./../action/init
    with:
      tools: ${{ steps.prepare-test.outputs.tools-url }}
      languages: cpp,csharp,java,javascript,python
      config-file: github/codeql-action/tests/multi-language-repo/.github/codeql/custom-queries.yml@${{ github.sha }}
  - name: Build code
    shell: bash
    run: ./build.sh
  - uses: ./../action/analyze
    with:
      ref: 'refs/heads/main'
      sha: 'dc1e2655b666a6d3624deba0983c9e6105d92dd4'
    env:
      TEST_MODE: true
  - uses: ./../action/upload-sarif
    with:
      ref: 'refs/heads/main'
      sha: 'dc1e2655b666a6d3624deba0983c9e6105d92dd4'
    env:
      TEST_MODE: true
